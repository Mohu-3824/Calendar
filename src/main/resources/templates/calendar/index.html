<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
	<head>
    	<div th:replace="~{fragment :: meta}"></div>
		<div th:replace="~{fragment :: styles}"></div>

    	<title>Edelweiss_カレンダー画面</title>
	</head>
	<body>
		<div class="edelweiss-wrapper">
			<div th:replace="~{fragment :: header}"></div>
    		<div class="calendar-container">
		
        		<!-- ヘッダー部分 -->
        		<div class="calendar-header">
            		<button class="nav-btn prev-btn">&lt;</button>
            		<h2 class="month-year">9月</h2>
            		<button class="nav-btn next-btn">&gt;</button>
            		<button class="settings-btn" title="カテゴリー設定">
                	<i id="setting" class="fas fa-cog"></i>
            		</button>
        		</div>

    			<!-- 曜日 -->
  				<div class="weekdays">
    				<div>日</div><div>月</div><div>火</div><div>水</div>
    				<div>木</div><div>金</div><div>土</div>
  				</div>
  
  				<!-- カレンダー本体 -->
  				<div class="calendar-grid" id="calendarGrid" 
       				th:data-today="${today}">
  				</div>
<div class="ranking-container">
    <h5 class="ranking-title">達成済タスクランキング</h5>
    <hr class="ranking-divider">

    <div class="ranking-tables">
        <!-- 連続達成日数 -->
        <div class="ranking-section">
            <h6>連続達成日数</h6>
            <table class="ranking-table">
                <tbody>
                    <tr th:each="task, iterStat : ${consecutiveRank}">
                        <td class="rank-num">[[${iterStat.index + 1}]]位</td>
                        <td>
                            <span class="task-title" th:style="'background-color:' + ${task.category.colorCode}">
                                <img th:if="${task.category.iconImage != null}"
                                     th:src="@{'/img/' + ${task.category.iconImage}}"
                                     class="task-icon">
                                <span th:text="${task.title}"></span>
                            </span>
                        </td>
                        <td class="rank-days">[[${task.consecutiveCompletedDays}]]日</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 累計達成日数 -->
        <div class="ranking-section">
            <h6>累計達成日数</h6>
            <table class="ranking-table">
                <tbody>
                    <tr th:each="task, iterStat : ${totalRank}">
                        <td class="rank-num">[[${iterStat.index + 1}]]位</td>
                        <td>
                            <span class="task-title" th:style="'background-color:' + ${task.category.colorCode}">
                                <img th:if="${task.category.iconImage != null}"
                                     th:src="@{'/img/' + ${task.category.iconImage}}"
                                     class="task-icon">
                                <span th:text="${task.title}"></span>
                            </span>
                        </td>
                        <td class="rank-days">[[${task.totalCompletedDays}]]日</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
		</div>
		<div th:replace="~{fragment :: footer}"></div>
		<div th:replace="~{fragment :: scripts}"></div>
		<script th:src="@{/js/siteRouting.js}"></script>
	</body>
</html>